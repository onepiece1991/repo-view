(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d2a8c5b"],{"2ed7":function(t,e,i){"use strict";i.r(e);var c=i("7a23");const s=t=>(Object(c["x"])("data-v-0d20a315"),t=t(),Object(c["v"])(),t),o={class:"cont-box main"},n={class:"cb-left"},a=s(()=>Object(c["g"])("p",{class:"title"},"品类",-1)),l={class:"checkbox-group"},r=["onClick","id","name","onUpdate:modelValue"],b=["for"],p=["for"],d={class:"other"},h=Object(c["i"])(" 其它："),u={class:"cb-right"},g=s(()=>Object(c["g"])("p",{class:"title"},"今天吃什么呐？",-1)),j={class:"wheel"},O=["src"],f={class:"prize",id:"prizeBox"},m={class:"prize-item"},k={class:"draw-txt"},x={class:"start-btn"},v=["src"],L={key:0,class:"tips"};function y(t,e,i,s,y,z){const w=Object(c["C"])("popupAlert");return Object(c["u"])(),Object(c["f"])("div",o,[Object(c["g"])("div",n,[a,Object(c["g"])("div",l,[(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(y.foodList,(t,e)=>(Object(c["u"])(),Object(c["f"])("div",{class:"checkbox-item",key:e},[Object(c["L"])(Object(c["g"])("input",{onClick:t=>z.clickCheckbox(t,e,y.foodList),type:"checkbox",id:"xx"+e,name:t.text,"onUpdate:modelValue":e=>t.checkFlag=e},null,8,r),[[c["G"],t.checkFlag]]),Object(c["g"])("label",{for:"xx"+e,class:"ui-checkbox"},null,8,b),Object(c["g"])("label",{for:"xx"+e,class:"ui-label"},Object(c["E"])(t.text),9,p)]))),128))]),Object(c["g"])("div",d,[h,Object(c["L"])(Object(c["g"])("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>y.otherVal=t),class:"other-input"},null,512),[[c["H"],y.otherVal]])]),Object(c["g"])("button",{class:"confirm",onClick:e[1]||(e[1]=(...t)=>z.confirmDataList&&z.confirmDataList(...t))},"确定")]),Object(c["g"])("div",u,[g,Object(c["g"])("div",j,[Object(c["g"])("div",{class:Object(c["p"])(["round",{not_roting:!y.roting}]),style:Object(c["q"])({transition:y.round_time+"ms",transform:"rotate("+y.deg+"deg)"})},[Object(c["g"])("img",{src:y.bgImg,alt:"大转盘",class:"rotate-bgimg"},null,8,O),Object(c["g"])("div",f,[(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(y.prizeList,(t,e)=>(Object(c["u"])(),Object(c["f"])("div",{class:"item-box",key:e,style:Object(c["q"])({transform:"rotate("+360/y.prizeList.length*e+"deg)"})},[Object(c["g"])("div",{class:Object(c["p"])(["item-bg",{transparent:e%2!=0}]),style:Object(c["q"])({"border-width":y.sWidth+"px"})},null,6),Object(c["g"])("div",m,[Object(c["g"])("p",k,Object(c["E"])(t.text),1)])],4))),128))])],6),Object(c["g"])("div",x,[Object(c["g"])("img",{src:y.startBtn,alt:"按钮背景",class:"start-img"},null,8,v),Object(c["g"])("button",{class:"rotate-btn",onClick:e[2]||(e[2]=(...t)=>z.startTurn&&z.startTurn(...t))},"转转")])]),y.prizeList.length%2!=0?(Object(c["u"])(),Object(c["f"])("p",L," 注：备选种类再加一种或者再减一种吧！ ")):Object(c["e"])("",!0)]),Object(c["j"])(w,{popupMsg:y.tipsTxt,ref:"tipsPop",onOnclick:z.confirmDinner},null,8,["popupMsg","onOnclick"])])}var z=i("0392"),w=i("be34");const C=i("4007"),T=i("8528");var M={data(){return{foodList:[],otherVal:"",prizeList:[],bgImg:C,startBtn:T,roting:!1,loading:!1,sWidth:100,deg:0,round_time:5e3,tipsTxt:""}},mounted(){this.$nextTick(()=>{this.getData()})},methods:{getData(){z["b"].get("/baseD/food.json").then(t=>{this.foodList=t.data.foodList,this.initPrizeList(this.foodList)}).catch(t=>{console.log(JSON.stringify(t))})},initPrizeList(t){this.prizeList=[];for(let i in t){let e={id:"",text:""};t[i].checkFlag&&(e.id=t[i].id,e.text=t[i].text,this.prizeList.push(e))}let e=2*Math.PI/360*(360/this.prizeList.length/2);this.sWidth=145*Math.sin(e)/Math.cos(e),this.sWidth<0&&(this.sWidth=0)},startTurn(){this.roting||this.loading||(this.loading=!0,setTimeout(()=>{let t=Math.floor(Math.random()*this.prizeList.length),e=this.prizeList[t];this.prizeList.some((t,i)=>{if(t.id===e.id){let t=this.getRote(i,this.prizeList.length);return this.roting=!0,this.deg=t,setTimeout(()=>{this.roting=!1,this.deg=t%360,this.tipsTxt="今天吃"+e.text,this.$refs.tipsPop.show()},this.round_time),!0}}),this.loading=!1},100))},getRote(t,e){e||(e=8);const i=10,c=8,s=0,o=360/e,n=Math.floor(Math.random()*-o)+o/2,a=Math.floor(Math.random()*(i-c+1)+c),l=360*a-o*t;return l+s*n},confirmDinner(){this.$refs.tipsPop.hide()},clickCheckbox(t,e,i){t.stopPropagation(),i[e].checkFlag=!i[e].checkFlag,this.initPrizeList(i)},confirmDataList(){""!=this.otherVal.trim()&&(this.foodList.push({id:this.foodList.length,text:this.otherVal,checkFlag:!0}),this.otherVal="",this.initPrizeList(this.foodList))}},components:{popupAlert:w["a"]}},E=(i("34ef"),i("6b0d")),S=i.n(E);const _=S()(M,[["render",y],["__scopeId","data-v-0d20a315"]]);e["default"]=_},"34ef":function(t,e,i){"use strict";i("b669")},4007:function(t,e,i){t.exports=i.p+"img/bg.7e0793a8.png"},"4e9b":function(t,e,i){},8528:function(t,e,i){t.exports=i.p+"img/start@2x.8942cd94.png"},9024:function(t,e,i){"use strict";i("4e9b")},b669:function(t,e,i){},be34:function(t,e,i){"use strict";var c=i("7a23");const s={key:0},o={class:"popup-box"},n={class:"title"},a={class:"popup-main"},l={class:"msg"},r={key:0,class:"btn-group"};function b(t,e,i,b,p,d){const h=Object(c["C"])("popup-mask");return p.popupAlertShow?(Object(c["u"])(),Object(c["f"])("div",s,[Object(c["g"])("div",o,[Object(c["g"])("h4",n,Object(c["E"])(i.titleTxt),1),Object(c["g"])("i",{class:"i-close",onClick:e[0]||(e[0]=(...t)=>d.hide&&d.hide(...t))}),Object(c["g"])("div",a,[Object(c["g"])("p",l,Object(c["E"])(i.popupMsg),1),Object(c["B"])(t.$slots,"default",{},void 0,!0)]),i.btnGroup?(Object(c["u"])(),Object(c["f"])("div",r,[Object(c["g"])("button",{class:"btn active",onClick:e[1]||(e[1]=(...t)=>d.clickEvent&&d.clickEvent(...t))},Object(c["E"])(i.confirmTxt),1),i.cancelbtn?(Object(c["u"])(),Object(c["f"])("button",{key:0,class:"btn",onClick:e[2]||(e[2]=(...t)=>d.clickCancelEvent&&d.clickCancelEvent(...t))},Object(c["E"])(i.cancelTxt),1)):Object(c["e"])("",!0)])):Object(c["e"])("",!0)]),Object(c["j"])(h)])):Object(c["e"])("",!0)}const p={class:"mask"};function d(t,e,i,s,o,n){return Object(c["u"])(),Object(c["f"])("div",p)}var h={data(){return{}}},u=(i("f8dc"),i("6b0d")),g=i.n(u);const j=g()(h,[["render",d],["__scopeId","data-v-4918f72d"]]);var O=j,f={components:{popupMask:O},props:{titleTxt:{type:String,default:"温馨提示"},popupMsg:{type:String,default:""},btnGroup:{type:[Boolean,String],default:!0},confirmTxt:{type:String,default:"确认"},cancelbtn:{type:[Boolean,String],default:!1},cancelTxt:{type:String,default:"取消"}},data(){return{popupAlertShow:!1}},methods:{show(){this.popupAlertShow=!0},hide(){this.popupAlertShow=!1},clickEvent(){this.$emit("onclick")},clickCancelEvent(){this.$emit("onclickCancel")}}};i("9024");const m=g()(f,[["render",b],["__scopeId","data-v-440c4439"]]);e["a"]=m},d73b:function(t,e,i){},f8dc:function(t,e,i){"use strict";i("d73b")}}]);
//# sourceMappingURL=chunk-4d2a8c5b.98190cc0.js.map